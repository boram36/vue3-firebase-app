import{Q as wt}from"./QPage-BvBQmXlz.js";import{z as w,A as X,B as Te,C as kt,D as S,E,G as se,H as $e,I as qt,J as Tt,K as je,L as Oe,M as St,O as fe,P as Ct,Q as He,R as xt,S as he,T as Ke,U as Xe,V as ee,W as Se,h as A,X as $t,Y as Lt,Z as It,_ as N,$ as Pt,a0 as Le,a1 as ye,a2 as ze,a3 as At,a4 as Qt,a5 as Bt,a6 as Rt,a7 as Ye,o as I,b as O,c as W,j as r,a8 as Ge,q as y,r as Dt,i as F,a9 as ce,aa as Je,ab as Ce,ac as de,a as Y,F as te,f as xe,ad as Q,t as ie,ae as Mt,af as Ie,ag as Z,ah as Ve,ai as Ue,aj as Et,w as Wt,e as Ze,u as et,ak as Ot,al as zt,am as Vt,x as Ut,an as Ft,ao as Nt,ap as jt,aq as Ht,ar as pe}from"./index-BDNlv_Je.js";import{g as Kt,c as Xt,a as Yt}from"./post-F3Q2EDJ-.js";import{_ as Gt}from"./PostList-DT19oVOD.js";import{Q as Jt}from"./QForm-DsXfaSk5.js";import{r as Zt,g as ea,u as ta,_ as aa}from"./PostForm-DD6YPlhU.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PostItem-B9PiSo2E.js";import"./QChip-BZLHqyL-.js";import"./useBookmark-E5C6u951.js";import"./QItemLabel-D3sOM9N0.js";import"./QCardActions-C4SI-P8W.js";import"./validate-rules-Cui1dtJC.js";import"./tiptap.scss_vue_type_style_index_0_src_true_lang-C51bjrN8.js";const at=Tt?window:void 0;function ue(e){var a;const o=X(e);return(a=o?.$el)!=null?a:o}function na(...e){let a,o,s,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,s,n]=e,a=at):[a,o,s,n]=e,!a)return se;o=Te(o),s=Te(s);const f=[],v=()=>{f.forEach(i=>i()),f.length=0},d=(i,b,k,_)=>(i.addEventListener(b,k,_),()=>i.removeEventListener(b,k,_)),p=E(()=>[ue(a),X(n)],([i,b])=>{if(v(),!i)return;const k=St(b)?{...b}:b;f.push(...o.flatMap(_=>s.map(C=>d(i,_,C,k))))},{immediate:!0,flush:"post"}),u=()=>{p(),v()};return $e(u),u}function oa(){const e=S(!1),a=fe();return a&&je(()=>{e.value=!0},a),e}function la(e){const a=oa();return w(()=>(a.value,!!e()))}function Fe(e,a,o={}){const{root:s,rootMargin:n="0px",threshold:f=0,window:v=at,immediate:d=!0}=o,p=la(()=>v&&"IntersectionObserver"in v),u=w(()=>{const C=X(e);return Te(C).map(ue).filter(kt)});let i=se;const b=S(d),k=p.value?E(()=>[u.value,ue(s),b.value],([C,x])=>{if(i(),!b.value||!C.length)return;const $=new IntersectionObserver(a,{root:ue(x),rootMargin:n,threshold:f});C.forEach(L=>L&&$.observe(L)),i=()=>{$.disconnect(),i=se}},{immediate:d,flush:"post"}):se,_=()=>{i(),k(),b.value=!1};return $e(_),{isSupported:p,isActive:b,pause(){i(),b.value=!1},resume(){b.value=!0},stop:_}}function _e(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const ra={mounted(e,a){typeof a.value=="function"?Fe(e,a.value):Fe(e,...a.value)}};function nt(e){const a=window.getComputedStyle(e);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&e.clientWidth<e.scrollWidth||a.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:nt(o)}}function sa(e){const a=e||window.event,o=a.target;return nt(o)?!1:a.touches.length>1?!0:(a.preventDefault&&a.preventDefault(),!1)}const we=new WeakMap;function ia(e,a=!1){const o=S(a);let s=null,n="";E(qt(e),d=>{const p=_e(X(d));if(p){const u=p;if(we.get(u)||we.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(n=u.style.overflow),u.style.overflow==="hidden")return o.value=!0;if(o.value)return u.style.overflow="hidden"}},{immediate:!0});const f=()=>{const d=_e(X(e));!d||o.value||(Oe&&(s=na(d,"touchmove",p=>{sa(p)},{passive:!1})),d.style.overflow="hidden",o.value=!0)},v=()=>{const d=_e(X(e));!d||!o.value||(Oe&&s?.(),d.style.overflow=n,we.delete(d),o.value=!1)};return $e(v),w({get(){return o.value},set(d){d?f():v()}})}function ua(){let e=!1;const a=S(!1);return(o,s)=>{if(a.value=s.value,e)return;e=!0;const n=ia(o,s.value);E(a,f=>n.value=f)}}ua();const ca=()=>{const e=Ct(),a=He(),o=w({get:()=>e.query.category||"",set:f=>a.push({query:{...e.query,category:f||void 0}})}),s=w({get:()=>e.query.sort||"createdAt",set:f=>a.push({query:{...e.query,sort:f}})}),n=w({get:()=>e.query.tags?.split(",")||[],set:f=>a.push({query:{...e.query,tags:f.length===0?void 0:f.join(",")}})});return{category:o,sort:s,tags:n}};let da=0;const fa=["click","keydown"],va={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${da++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ga(e,a,o,s){const n=xt(Ke,he);if(n===he)return console.error("QTab/QRouteTab component needs to be child of QTabs"),he;const{proxy:f}=fe(),v=S(null),d=S(null),p=S(null),u=w(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),i=w(()=>n.currentModel.value===e.name),b=w(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(i.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),k=w(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),_=w(()=>e.disable===!0||n.hasFocus.value===!0||i.value===!1&&n.hasActiveTab.value===!0?-1:e.tabindex||0);function C(m,B){if(B!==!0&&v.value!==null&&v.value.focus(),e.disable!==!0){n.updateModel({name:e.name}),o("click",m);return}}function x(m){$t(m,[13,32])?C(m,!0):Lt(m)!==!0&&m.keyCode>=35&&m.keyCode<=40&&m.altKey!==!0&&m.metaKey!==!0&&n.onKbdNavigate(m.keyCode,f.$el)===!0&&It(m),o("keydown",m)}function $(){const m=n.tabProps.value.narrowIndicator,B=[],D=A("div",{ref:p,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});e.icon!==void 0&&B.push(A(N,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&B.push(A("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&B.push(e.alertIcon!==void 0?A(N,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):A("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),m===!0&&B.push(D);const R=[A("div",{class:"q-focus-helper",tabindex:-1,ref:v}),A("div",{class:k.value},Pt(a.default,B))];return m===!1&&R.push(D),R}const L={name:w(()=>e.name),rootRef:d,tabIndicatorRef:p,routeData:s};Xe(()=>{n.unregisterTab(L)}),je(()=>{n.registerTab(L)});function ae(m,B){const D={ref:d,class:b.value,tabindex:_.value,role:"tab","aria-selected":i.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:C,onKeydown:x,...B};return ee(A(m,D,$()),[[Se,u.value]])}return{renderTab:ae,$tabs:n}}const ke=Le({name:"QTab",props:va,emits:fa,setup(e,{slots:a,emit:o}){const{renderTab:s}=ga(e,a,o);return()=>s("div")}});function ma(e,a,o){const s=o===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const ba=["left","center","right","justify"],ha=Le({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>ba.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:o}){const{proxy:s}=fe(),{$q:n}=s,{registerTick:f}=ye(),{registerTick:v}=ye(),{registerTick:d}=ye(),{registerTimeout:p,removeTimeout:u}=ze(),{registerTimeout:i,removeTimeout:b}=ze(),k=S(null),_=S(null),C=S(e.modelValue),x=S(!1),$=S(!0),L=S(!1),ae=S(!1),m=[],B=S(0),D=S(!1);let R=null,j=null,z;const lt=w(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ma(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),rt=w(()=>{const t=B.value,l=C.value;for(let c=0;c<t;c++)if(m[c].name.value===l)return!0;return!1}),st=w(()=>`q-tabs__content--align-${x.value===!0?"left":ae.value===!0?"justify":e.align}`),it=w(()=>`q-tabs row no-wrap items-center q-tabs--${x.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ut=w(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+st.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),ne=w(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),oe=w(()=>e.vertical!==!0&&n.lang.rtl===!0),ve=w(()=>Zt===!1&&oe.value===!0);E(oe,K),E(()=>e.modelValue,t=>{ge({name:t,setCurrent:!0,skipEmit:!0})}),E(()=>e.outsideArrows,le);function ge({name:t,setCurrent:l,skipEmit:c}){C.value!==t&&(c!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",t),(l===!0||e["onUpdate:modelValue"]===void 0)&&(ct(C.value,t),C.value=t))}function le(){f(()=>{k.value&&Pe({width:k.value.offsetWidth,height:k.value.offsetHeight})})}function Pe(t){if(ne.value===void 0||_.value===null)return;const l=t[ne.value.container],c=Math.min(_.value[ne.value.scroll],Array.prototype.reduce.call(_.value.children,(T,h)=>T+(h[ne.value.content]||0),0)),q=l>0&&c>l;x.value=q,q===!0&&v(K),ae.value=l<parseInt(e.breakpoint,10)}function ct(t,l){const c=t!=null&&t!==""?m.find(T=>T.name.value===t):null,q=l!=null&&l!==""?m.find(T=>T.name.value===l):null;if(re===!0)re=!1;else if(c&&q){const T=c.tabIndicatorRef.value,h=q.tabIndicatorRef.value;R!==null&&(clearTimeout(R),R=null),T.style.transition="none",T.style.transform="none",h.style.transition="none",h.style.transform="none";const g=T.getBoundingClientRect(),P=h.getBoundingClientRect();h.style.transform=e.vertical===!0?`translate3d(0,${g.top-P.top}px,0) scale3d(1,${P.height?g.height/P.height:1},1)`:`translate3d(${g.left-P.left}px,0,0) scale3d(${P.width?g.width/P.width:1},1,1)`,d(()=>{R=setTimeout(()=>{R=null,h.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",h.style.transform="none"},70)})}q&&x.value===!0&&H(q.rootRef.value)}function H(t){const{left:l,width:c,top:q,height:T}=_.value.getBoundingClientRect(),h=t.getBoundingClientRect();let g=e.vertical===!0?h.top-q:h.left-l;if(g<0){_.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(g),K();return}g+=e.vertical===!0?h.height-T:h.width-c,g>0&&(_.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(g),K())}function K(){const t=_.value;if(t===null)return;const l=t.getBoundingClientRect(),c=e.vertical===!0?t.scrollTop:Math.abs(t.scrollLeft);oe.value===!0?($.value=Math.ceil(c+l.width)<t.scrollWidth-1,L.value=c>0):($.value=c>0,L.value=e.vertical===!0?Math.ceil(c+l.height)<t.scrollHeight:Math.ceil(c+l.width)<t.scrollWidth)}function Ae(t){j!==null&&clearInterval(j),j=setInterval(()=>{vt(t)===!0&&V()},5)}function Qe(){Ae(ve.value===!0?Number.MAX_SAFE_INTEGER:0)}function Be(){Ae(ve.value===!0?0:Number.MAX_SAFE_INTEGER)}function V(){j!==null&&(clearInterval(j),j=null)}function dt(t,l){const c=Array.prototype.filter.call(_.value.children,P=>P===l||P.matches&&P.matches(".q-tab.q-focusable")===!0),q=c.length;if(q===0)return;if(t===36)return H(c[0]),c[0].focus(),!0;if(t===35)return H(c[q-1]),c[q-1].focus(),!0;const T=t===(e.vertical===!0?38:37),h=t===(e.vertical===!0?40:39),g=T===!0?-1:h===!0?1:void 0;if(g!==void 0){const P=oe.value===!0?-1:1,M=c.indexOf(l)+g*P;return M>=0&&M<q&&(H(c[M]),c[M].focus({preventScroll:!0})),!0}}const ft=w(()=>ve.value===!0?{get:t=>Math.abs(t.scrollLeft),set:(t,l)=>{t.scrollLeft=-l}}:e.vertical===!0?{get:t=>t.scrollTop,set:(t,l)=>{t.scrollTop=l}}:{get:t=>t.scrollLeft,set:(t,l)=>{t.scrollLeft=l}});function vt(t){const l=_.value,{get:c,set:q}=ft.value;let T=!1,h=c(l);const g=t<h?-1:1;return h+=g*5,h<0?(T=!0,h=0):(g===-1&&h<=t||g===1&&h>=t)&&(T=!0,h=t),q(l,h),K(),T}function Re(t,l){for(const c in t)if(t[c]!==l[c])return!1;return!0}function gt(){let t=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const c=m.filter(g=>g.routeData!==void 0&&g.routeData.hasRouterLink.value===!0),{hash:q,query:T}=s.$route,h=Object.keys(T).length;for(const g of c){const P=g.routeData.exact.value===!0;if(g.routeData[P===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:M,query:me,matched:pt,href:_t}=g.routeData.resolvedLink.value,be=Object.keys(me).length;if(P===!0){if(M!==q||be!==h||Re(T,me)===!1)continue;t=g.name.value;break}if(M!==""&&M!==q||be!==0&&Re(me,T)===!1)continue;const U={matchedLen:pt.length,queryDiff:h-be,hrefLen:_t.length-M.length};if(U.matchedLen>l.matchedLen){t=g.name.value,l=U;continue}else if(U.matchedLen!==l.matchedLen)continue;if(U.queryDiff<l.queryDiff)t=g.name.value,l=U;else if(U.queryDiff!==l.queryDiff)continue;U.hrefLen>l.hrefLen&&(t=g.name.value,l=U)}if(t===null&&m.some(g=>g.routeData===void 0&&g.name.value===C.value)===!0){re=!1;return}ge({name:t,setCurrent:!0})}function mt(t){if(u(),D.value!==!0&&k.value!==null&&t.target&&typeof t.target.closest=="function"){const l=t.target.closest(".q-tab");l&&k.value.contains(l)===!0&&(D.value=!0,x.value===!0&&H(l))}}function bt(){p(()=>{D.value=!1},30)}function G(){Me.avoidRouteWatcher===!1?i(gt):b()}function De(){if(z===void 0){const t=E(()=>s.$route.fullPath,G);z=()=>{t(),z=void 0}}}function ht(t){m.push(t),B.value++,le(),t.routeData===void 0||s.$route===void 0?i(()=>{if(x.value===!0){const l=C.value,c=l!=null&&l!==""?m.find(q=>q.name.value===l):null;c&&H(c.rootRef.value)}}):(De(),t.routeData.hasRouterLink.value===!0&&G())}function yt(t){m.splice(m.indexOf(t),1),B.value--,le(),z!==void 0&&t.routeData!==void 0&&(m.every(l=>l.routeData===void 0)===!0&&z(),G())}const Me={currentModel:C,tabProps:lt,hasFocus:D,hasActiveTab:rt,registerTab:ht,unregisterTab:yt,verifyRouteModel:G,updateModel:ge,onKbdNavigate:dt,avoidRouteWatcher:!1};At(Ke,Me);function Ee(){R!==null&&clearTimeout(R),V(),z!==void 0&&z()}let We,re;return Xe(Ee),Qt(()=>{We=z!==void 0,Ee()}),Bt(()=>{We===!0&&(De(),re=!0,G()),le()}),()=>A("div",{ref:k,class:it.value,role:"tablist",onFocusin:mt,onFocusout:bt},[A(Rt,{onResize:Pe}),A("div",{ref:_,class:ut.value,onScroll:K},Ye(a.default)),A(N,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+($.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||n.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Qe,onTouchstartPassive:Qe,onMouseupPassive:V,onMouseleavePassive:V,onTouchendPassive:V}),A(N,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(L.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||n.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Be,onTouchstartPassive:Be,onMouseupPassive:V,onMouseleavePassive:V,onTouchendPassive:V})])}}),ya={class:"flex items-center q-mb-lg"},pa={__name:"PostHeader",props:{sort:{type:String,default:"createdAt"}},emits:["update:sort"],setup(e){return(a,o)=>(I(),O("div",ya,[o[1]||(o[1]=W("div",{class:"text-h5"},"커뮤니티 목록",-1)),r(Ge),r(ha,{"model-value":e.sort,"onUpdate:modelValue":o[0]||(o[0]=s=>a.$emit("update:sort",s)),"narrow-indicator":"",dense:""},{default:y(()=>[r(ke,{rapple:!1,label:"최신순",name:"createdAt"}),r(ke,{rapple:!1,label:"조회순",name:"readCount"}),r(ke,{rapple:!1,label:"좋아요순",name:"likeCount"})]),_:1},8,["model-value"])]))}},_a={},wa={class:"sticky-side-bar"};function ka(e,a){return I(),O("aside",wa,[Dt(e.$slots,"default",{},void 0,!0)])}const ot=tt(_a,[["render",ka],["__scopeId","data-v-68ef0575"]]),qa={__name:"PostLeftBar",props:{category:{type:String,default:""}},emits:["update:category"],setup(e,{emit:a}){const o=ea(),s=a,n=f=>{s("update:category",f)};return(f,v)=>(I(),F(ot,null,{default:y(()=>[r(ce,{flat:"",bordered:""},{default:y(()=>[r(Je,{bordered:"",separator:""},{default:y(()=>[ee((I(),F(Ce,{clickable:"",active:e.category===null,onClick:v[0]||(v[0]=d=>n(null))},{default:y(()=>[r(de,null,{default:y(()=>v[1]||(v[1]=[Y("전체")])),_:1})]),_:1},8,["active"])),[[Se]]),(I(!0),O(te,null,xe(Q(o),d=>ee((I(),F(Ce,{key:d.value,clickable:"",active:e.category===d.value,onClick:p=>n(d.value)},{default:y(()=>[r(de,null,{default:y(()=>[Y(ie(d.label),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),[[Se]])),128))]),_:1})]),_:1})]),_:1}))}},Ta={class:"q-gutter-sm q-pb-sm"},Sa={key:0,class:"flex flex-center"},Ca={__name:"PostRightBar",props:{tags:{type:Array,default:()=>[]}},emits:["openWriteDialog","update:tags"],setup(e,{emit:a}){const o=e,s=a,{addTag:n,removeTag:f}=ta({tags:Mt(o,"tags"),updateTags:u=>s("update:tags",u),maxLengthMessage:"태그는 10개 이상 등록할 수 없습니다."}),{state:v,isLoading:d,execute:p}=Ie(()=>Kt());return(u,i)=>(I(),F(ot,null,{default:y(()=>[r(Z,{padding:"8px 12px 8px 8px",unelevated:"",color:"primary","text-color":"white",class:"full-width",onClick:i[0]||(i[0]=b=>u.$emit("openWriteDialog"))},{default:y(()=>[r(Ve,{class:"q-mr-sm",color:"white","text-color":"primary",size:"22px"},{default:y(()=>[r(N,{name:"edit",size:"14px"})]),_:1}),i[1]||(i[1]=W("span",{class:"text-weight-bold"},"새 포스트 작성하기",-1))]),_:1}),r(ce,{class:"q-mt-md bg-grey-1",bordered:"",flat:""},{default:y(()=>[r(Ue,{class:"flex items-center q-pb-none"},{default:y(()=>[i[2]||(i[2]=W("div",{class:"text-weight-bold"},"태그",-1)),r(Ge),r(Z,{icon:"refresh",dense:"",size:"sm",flat:"",round:"",color:"grey",onClick:Q(p)},null,8,["onClick"])]),_:1}),r(Ue,{class:"q-pb-sm"},{default:y(()=>[r(ce,{class:"q-px-sm",bordered:"",flat:"",square:""},{default:y(()=>[r(Jt,{borderless:"",dense:"","input-style":"font-size: 12px;",placeholder:"태그로 검색해보세요",onKeypress:Et(Wt(Q(n),["prevent"]),["enter"])},null,8,["onKeypress"]),W("div",Ta,[(I(!0),O(te,null,xe(e.tags,(b,k)=>(I(),F(Z,{key:b,size:"10px",padding:"2px 4px 2px 7px",color:"grey-3","text-color":"dark",unelevated:"",onClick:_=>Q(f)(k)},{default:y(()=>[Y(ie(b)+" ",1),r(N,{name:"clear",size:"12px",color:"grey"})]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1}),Q(d)?(I(),O("div",Sa,"loading...")):Ze("",!0),r(Je,{padding:""},{default:y(()=>[(I(!0),O(te,null,xe(Q(v),({name:b,count:k})=>(I(),F(Ce,{key:b,clickable:"",dense:"",onClick:_=>Q(n)(b)},{default:y(()=>[r(de,{class:"text-teal text-caption"},{default:y(()=>[Y(" #"+ie(b),1)]),_:2},1024),r(de,{side:"",class:"text-teal text-caption"},{default:y(()=>[Y(ie(k),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),r(Z,{class:"full-width q-mt-md",color:"dark",unelevated:"",to:"/search"},{default:y(()=>[r(Ve,{class:"q-mr-xs",size:"22px"},{default:y(()=>[r(N,{name:"sym_o_search",size:"20px"})]),_:1}),i[3]||(i[3]=W("span",{class:"text-weight-bold"},"Algolia Search",-1))]),_:1})]),_:1}))}},Ne=()=>({title:"",category:"",content:"",tags:[]}),xa={__name:"PostWriteDialog",emits:["complete"],setup(e,{emit:a}){const o=a;He();const s=et(),n=S(Ne()),f=()=>{n.value=Ne()},{isLoading:v,execute:d}=Ie(Xt,null,{immediate:!1,throwError:!0,onSuccess:p=>{console.log("postId: ",p),o("complete")}});return(p,u)=>(I(),F(Ft,Ut({persistent:""},p.$attrs,{onHide:f,"transition-show":"none","transition-hide":"none"}),{default:y(()=>[r(ce,{style:{minWidth:"660px"}},{default:y(()=>[r(Ot,null,{default:y(()=>[r(zt,null,{default:y(()=>u[5]||(u[5]=[Y("글쓰기")])),_:1}),ee(r(Z,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Nt]])]),_:1}),r(Vt),r(aa,{title:n.value.title,"onUpdate:title":u[0]||(u[0]=i=>n.value.title=i),category:n.value.category,"onUpdate:category":u[1]||(u[1]=i=>n.value.category=i),content:n.value.content,"onUpdate:content":u[2]||(u[2]=i=>n.value.content=i),tags:n.value.tags,"onUpdate:tags":u[3]||(u[3]=i=>n.value.tags=i),loading:Q(v),onSubmit:u[4]||(u[4]=i=>Q(d)(1e3,{...n.value,uid:Q(s).uid}))},null,8,["title","category","content","tags","loading"])]),_:1})]),_:1},16))}},$a=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],La=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],qe=Le({name:"QSkeleton",props:{...jt,tag:{type:String,default:"div"},type:{type:String,validator:e=>$a.includes(e),default:"rect"},animation:{type:String,validator:e=>La.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:a}){const o=fe(),s=Ht(e,o.proxy.$q),n=w(()=>{const v=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:v[0],height:v[1]}}),f=w(()=>`q-skeleton q-skeleton--${s.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>A(e.tag,{class:f.value,style:n.value},Ye(a.default))}}),Ia={},Pa={class:"q-pa-md bg-white"},Aa={class:"q-gutter-y-md"};function Qa(e,a){return I(),O("div",Pa,[W("div",Aa,[r(qe,{bordered:"",type:"circle"}),r(qe,{bordered:""}),r(qe,{bordered:"",square:""})])])}const J=tt(Ia,[["render",Qa]]),Ba={__name:"PostListSkeleton",setup(e){return(a,o)=>(I(),O(te,null,[r(J),r(J),r(J),r(J),r(J)],64))}},Ra={class:"row q-col-gutter-x-lg"},Da={class:"col-7"},Ga={__name:"index",setup(e){const{category:a,sort:o,tags:s}=ca(),n=et(),f=w(()=>({category:a.value,tags:s.value,sort:o.value,limit:6})),v=S([]),d=S(null),p=S(!0),{execute:u}=Ie(Yt,[],{immediate:!1,throwError:!0,onSuccess:x=>{d.value?v.value=v.value.concat(x.items):v.value=x.items,p.value=x.items.length>=f.value.limit,d.value=x.lastItem}});E(f,()=>{d.value=null,u(0,f.value)},{deep:!0});const i=S(!1),b=()=>{if(!n.isAuthenticated){alert("로그인 후 이용 가능합니다.");return}i.value=!0},k=()=>{i.value=!1,u(0,f.value)},_=()=>{u(0,{...f.value,start:d.value})},C=([{isIntersecting:x}])=>{x&&p.value&&(console.log("### handleIntersectionObserver ###"),_())};return(x,$)=>(I(),O(te,null,[r(wt,{padding:""},{default:y(()=>[W("div",Ra,[r(qa,{class:"col-grow",category:Q(a),"onUpdate:category":$[0]||($[0]=L=>pe(a)?a.value=L:null)},null,8,["category"]),W("section",Da,[r(pa,{sort:Q(o),"onUpdate:sort":$[1]||($[1]=L=>pe(o)?o.value=L:null)},null,8,["sort"]),x.isLoading?(I(),F(Ba,{key:0})):Ze("",!0),r(Gt,{items:v.value},null,8,["items"]),ee(W("div",null,null,512),[[Q(ra),C]])]),r(Ca,{class:"col-3",onOpenWriteDialog:b,tags:Q(s),"onUpdate:tags":$[2]||($[2]=L=>pe(s)?s.value=L:null)},null,8,["tags"])])]),_:1}),r(xa,{modelValue:i.value,"onUpdate:modelValue":$[3]||($[3]=L=>i.value=L),onComplete:k},null,8,["modelValue"])],64))}};export{Ga as default};
