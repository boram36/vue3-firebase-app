import{af as g,o as _,i as C,q as l,j as o,ac as x,ah as w,c as t,ad as a,t as d,a as B,b as y,F as M,f as q,ag as b,w as p,ab as L}from"./index-BDNlv_Je.js";import{Q as T}from"./QChip-BZLHqyL-.js";import{u as Q,a as I,_ as u}from"./useBookmark-E5C6u951.js";import{d as D}from"./post-F3Q2EDJ-.js";function N(e=new Date("2024-01-07")){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),f=Math.abs(e-new Date),m=Math.floor(f/1e3),i=Math.floor(m/60),n=Math.floor(i/60),c=Math.floor(n/24),r=Math.floor(c/365);return console.log(m),console.log(i),console.log(n),console.log(c),console.log(r),r>0?s.format(-1*r,"year"):c>0?s.format(-1*c,"day"):n>0?s.format(-1*n,"hour"):i>0?s.format(-1*i,"minute"):s.format(-1*m,"second")}const A=["src"],F={class:"flex items-center"},R={class:"text-h6 q-mt-sm"},S={class:"text-primary text-caption"},U=["innerHTML"],V={class:"row items-center"},j={class:"col-3"},H={class:"flex flex-center"},$={class:"col-3"},E={class:"flex flex-center"},O={class:"col-3"},P={class:"flex flex-center"},z={class:"col-3"},G={class:"flex flex-center"},Z={__name:"PostItem",props:{item:{type:Object,default:()=>({})}},setup(e){const s=e,{isLike:h,likeCount:f,toggleLike:m}=Q(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:i,bookmarkCount:n,toggleBookmark:c}=I(s.item.id,{initialCount:s.item.bookmarkCount}),{state:r}=g(()=>D(s.item.uid));return(J,k)=>(_(),C(L,{clickable:"",to:`/posts/${e.item.id}`,class:"bg-white q-pt-md"},{default:l(()=>[o(x,{avatar:"",top:""},{default:l(()=>[o(w,null,{default:l(()=>[t("img",{src:a(r)?.photoURL,alt:""},null,8,A)]),_:1})]),_:1}),o(x,null,{default:l(()=>[t("div",F,[t("span",null,d(a(r)?.displayName),1),k[0]||(k[0]=t("span",{class:"q-mx-xs"},"·",-1)),t("span",null,d(a(N)(e.item.createdAt)),1),o(T,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:l(()=>[B(d(e.item.category),1)]),_:1})]),t("div",R,d(e.item.title),1),t("div",S,[(_(!0),y(M,null,q(e.item.tags,v=>(_(),y("span",{key:v,class:"q-mr-sm"},"#"+d(v),1))),128))]),t("div",{class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,U),t("div",V,[t("div",j,[t("div",H,[o(u,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"조회수"},null,8,["label"])])]),t("div",$,[t("div",E,[o(u,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"댓글수"},null,8,["label"])])]),t("div",O,[t("div",P,[o(b,{class:"full-width",flat:"",dense:"",onClick:p(a(m),["prevent"])},{default:l(()=>[o(u,{name:a(h)?"favorite":"sym_o_favorite",label:a(f),tooltip:"좋아요"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",z,[t("div",G,[o(b,{class:"full-width",flat:"",dense:"",onClick:p(a(c),["prevent"])},{default:l(()=>[o(u,{name:a(i)?"bookmark":"sym_o_bookmark",label:a(n),tooltip:"북마크"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]),_:1})]),_:1},8,["to"]))}};export{Z as _};
