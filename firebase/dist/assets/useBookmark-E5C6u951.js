import{a0 as le,b0 as ie,b1 as re,b2 as S,b3 as E,b4 as ue,b5 as ce,b6 as de,D as c,z as k,b7 as L,a1 as ve,a2 as fe,b8 as me,b9 as he,ba as ge,bb as be,bc as ke,E as y,U as A,bd as H,be as q,bf as ye,bg as j,bh as D,bi as pe,h as N,bj as Te,O as Se,Z as we,bk as Ce,a7 as Pe,o as _,b as xe,j as Oe,x as Be,_ as Ee,c as Le,t as I,i as Ae,q as He,a as qe,e as je,F as De,s as M,u as V,bl as Q}from"./index-BDNlv_Je.js";import{i as Ne,r as _e,j as Ie,k as Me,l as Ve,m as Qe}from"./post-F3Q2EDJ-.js";const Re=le({name:"QTooltip",inheritAttrs:!1,props:{...ie,...re,...S,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...S.transitionShow,default:"jump-down"},transitionHide:{...S.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:E},self:{type:String,default:"top middle",validator:E},offset:{type:Array,default:()=>[14,14],validator:ue},scrollTarget:ce,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...de],setup(e,{slots:d,emit:v,attrs:l}){let n,t;const s=Se(),{proxy:{$q:a}}=s,i=c(null),u=c(!1),m=k(()=>L(e.anchor,a.lang.rtl)),R=k(()=>L(e.self,a.lang.rtl)),W=k(()=>e.persistent!==!0),{registerTick:z,removeTick:F}=ve(),{registerTimeout:b}=fe(),{transitionProps:U,transitionStyle:$}=me(e),{localScrollTarget:w,changeScrollEvent:Z,unconfigureScrollTarget:G}=he(e,O),{anchorEl:r,canShow:J,anchorEvents:h}=ge({showing:u,configureAnchorEl:oe}),{show:K,hide:p}=be({showing:u,canShow:J,handleShow:Y,handleHide:ee,hideOnRouteChange:W,processOnMount:!0});Object.assign(h,{delayShow:te,delayHide:ae});const{showPortal:C,hidePortal:P,renderPortal:X}=ke(s,i,se,"tooltip");if(a.platform.is.mobile===!0){const o={anchorEl:r,innerRef:i,onClickOutside(f){return p(f),f.target.classList.contains("q-dialog__backdrop")&&we(f),!0}},T=k(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);y(T,f=>{(f===!0?Ce:H)(o)}),A(()=>{H(o)})}function Y(o){C(),z(()=>{t=new MutationObserver(()=>g()),t.observe(i.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),g(),O()}),n===void 0&&(n=y(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,g)),b(()=>{C(!0),v("show",o)},e.transitionDuration)}function ee(o){F(),P(),x(),b(()=>{P(!0),v("hide",o)},e.transitionDuration)}function x(){t!==void 0&&(t.disconnect(),t=void 0),n!==void 0&&(n(),n=void 0),G(),q(h,"tooltipTemp")}function g(){ye({targetEl:i.value,offset:e.offset,anchorEl:r.value,anchorOrigin:m.value,selfOrigin:R.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function te(o){if(a.platform.is.mobile===!0){j(),document.body.classList.add("non-selectable");const T=r.value,f=["touchmove","touchcancel","touchend","click"].map(B=>[T,B,"delayHide","passiveCapture"]);D(h,"tooltipTemp",f)}b(()=>{K(o)},e.delay)}function ae(o){a.platform.is.mobile===!0&&(q(h,"tooltipTemp"),j(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{p(o)},e.hideDelay)}function oe(){if(e.noParentEvent===!0||r.value===null)return;const o=a.platform.is.mobile===!0?[[r.value,"touchstart","delayShow","passive"]]:[[r.value,"mouseenter","delayShow","passive"],[r.value,"mouseleave","delayHide","passive"]];D(h,"anchor",o)}function O(){if(r.value!==null||e.scrollTarget!==void 0){w.value=pe(r.value,e.scrollTarget);const o=e.noParentEvent===!0?g:p;Z(w.value,o)}}function ne(){return u.value===!0?N("div",{...l,ref:i,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,$.value],role:"tooltip"},Pe(d.default)):null}function se(){return N(Te,U.value,ne)}return A(x),Object.assign(s.proxy,{updatePosition:g}),X}}),We={class:"text-grey q-ml-xs text-body2"},Ue={__name:"PostIcon",props:{name:{type:String,required:!0},label:{type:[String,Number]},tooltip:{type:String}},setup(e){return(d,v)=>(_(),xe(De,null,[Oe(Ee,Be({name:e.name,color:"grey",size:"xs"},d.$attrs),null,16,["name"]),Le("span",We,I(e.label),1),e.tooltip?(_(),Ae(Re,{key:0,offset:[0,4]},{default:He(()=>[qe(I(e.tooltip),1)]),_:1})):je("",!0)],64))}},$e=(e,d)=>{const{initialCount:v}=d||{},{uid:l,isAuthenticated:n}=M(V()),t=c(!1),s=c(v),a=c(e),i=async()=>{if(n.value===!1){t.value=!1;return}t.value=await Ne(l.value,a.value)},u=async()=>{n.value!==!1&&(t.value?(await _e(l.value,a.value),s.value--):(await Ie(l.value,a.value),s.value++),t.value=!t.value)};return y(n,()=>i(),{immediate:!0}),{isLike:t,likeCount:Q(s),updateLikeCount:m=>s.value=m,toggleLike:u}},Ze=(e,d)=>{const{initialCount:v=0}=d||{},{uid:l,isAuthenticated:n}=M(V()),t=c(!1),s=c(v),a=c(e),i=async()=>{if(n.value===!1){t.value=!1;return}t.value=await Me(l.value,a.value)},u=async()=>{if(n.value===!1){alert("로그인 후 이용 가능합니다.");return}t.value?(await Ve(l.value,a.value),s.value--):(await Qe(l.value,a.value),s.value++),t.value=!t.value};return y(n,()=>i(),{immediate:!0}),{isBookmark:t,bookmarkCount:Q(s),updateBookmarkCount:m=>s.value=m,toggleBookmark:u}};export{Ue as _,Ze as a,$e as u};
